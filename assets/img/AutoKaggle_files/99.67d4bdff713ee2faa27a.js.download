(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1016:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(1),s=n.n(i),a=n(578),r=n(0);n(577);const o=s()(a.b)``,l=e=>{const{align:t,children:n,className:i,desktop:s,order:a,phone:l,span:c,tablet:d}=e;return r.createElement(o,{align:t,className:i,desktop:s,order:a,phone:l,span:c,tablet:d},n)}},1058:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return d}));var i=n(1),s=n.n(i);const a=i.keyframes`
  {
    0% {
      background-position: -200px 0;
    }
    100% {
      background-position: calc(200px + 100%) 0;
    }
  }
`,r=s.a.div`
  background-color: ${e=>e.theme.colors.misc.grayLighter};
  background-image: linear-gradient(
    90deg,
    ${e=>e.theme.colors.misc.grayLighter},
    ${e=>e.theme.colors.misc.grayLightest},
    ${e=>e.theme.colors.misc.grayLighter}
  );

  background-size: 200px 100%;
  background-repeat: no-repeat;
  border-radius: ${e=>e.theme.size.border.radius.loadingBar};
  margin: ${e=>e.theme.size.margin.xs};
  animation: ${a} 1.2s ease-in-out 0s infinite normal none running;
`,o=s()(r)`
  width: ${e=>{var t;return null!==(t=e.width)&&void 0!==t?t:"auto"}};
  height: ${e=>e.fontSize.toString()+"px"};
  margin-top: ${e=>(e.lineHeight-e.fontSize).toString()+"px"};
`,l=s()(o).attrs({fontSize:20,lineHeight:24})``,c=s()(o).attrs({fontSize:16,lineHeight:24})``,d=s()(o).attrs({fontSize:12,lineHeight:20})``},1061:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(1),s=n.n(i),a=n(578),r=n(0);n(577);const o=s()(a.a)`
  && {
    padding: ${e=>e.padding?e.padding:"0px"};
  }
`,l=e=>{const{align:t,children:n,className:i,fixedColumnWidth:s,padding:a}=e;return r.createElement(o,{align:t,className:i,fixedColumnWidth:s,padding:a},n)}},1144:function(e,t,n){"use strict";var i=n(44),s=n(54),a=n(469),r=n(1349),o=n(1061),l=n(1016),c=n(1),d=n.n(c),u=n(482),p=n(0),g=n(532),m=n(381),h=n(191),f=n(98);const b=d.a.div`
  height: 48px;
  display: flex;
  align-items: center;
  padding: 0 8px;
  border: 1px solid ${e=>e.theme.material.color.brand.grey[100]};
  border-radius: ${e=>e.theme.material.borderRadius.normal};
  cursor: pointer;

  &:focus {
    outline: none;
  }
`,C=d.a.div`
  display: flex;
  align-items: center;
`,y=d.a.div`
  flex: 0;
  margin-left: 8px;
`,v=d()(s.a)`
  flex: 0;
  margin: 0 8px;
`,E=d()(i.b)`
  flex: 1;
  margin-left: 8px;
`,x=e=>{const{items:t,selectedItem:n,disabled:i,onSelect:s}=e,[a,r]=p.useState(!1);return p.createElement(m.a,null,p.createElement(h.a,{open:a,anchorCorner:"bottomLeft",hoistToBody:!0,onClose:()=>r(!1),style:{zIndex:1001}},t.map(e=>p.createElement(f.a,{key:e.key,onClick:()=>s(e)},p.createElement(C,null,e.icon&&p.createElement(y,null,e.icon),p.createElement(E,null,e.label))))),p.createElement(b,{onClick:()=>!i&&r(!0)},n&&n.icon&&p.createElement(y,null,n.icon),p.createElement(E,null,n&&n.label),p.createElement(v,{icon:"arrow_drop_down",size:"small"})))};n.d(t,"a",(function(){return U}));const O=d()(i.e)`
  display: block;
  margin: 16px 0;
`,w=d()(i.c)`
  margin-top: 8px;
`,U=e=>{const{allowedOwners:t,isDisabled:n,isPrivate:i,licenseGroups:c,licenseId:d,limits:m,owner:h,onLicenseIdChange:f,onOwnerChange:b,onPrivacyChange:C}=e;return p.createElement(g.c,null,p.createElement(g.a,{"data-testid":"remote-gcsfileset-header"},"Dataset Settings"),p.createElement(o.a,null,p.createElement(l.a,{desktop:6,phone:12},(()=>{const e=[{key:"private",label:"Private",icon:p.createElement(s.a,{icon:"lock"})},{key:"public",label:"Public",icon:p.createElement(s.a,{icon:"lock_open"})}],t=i?e[0]:e[1];return p.createElement(p.Fragment,null,p.createElement(O,{emphasis:"low"},"Visibility"),p.createElement(x,{items:e,selectedItem:t,disabled:n,onSelect:e=>C("private"===e.key)}))})()),p.createElement(l.a,{desktop:6,phone:12},(()=>{const{usedBytes:e,totalBytes:t}=m,n=e<t&&0!==t?e/t:1;return p.createElement(p.Fragment,null,p.createElement(O,{emphasis:"low"},i?"Private Quota":"Public Quota"),p.createElement(r.a,{closed:!1,progress:n}),p.createElement(w,{emphasis:"low"},u(e)," / ",u(t)))})()),p.createElement(l.a,{desktop:6,phone:12},(()=>{const e=t.map(e=>{const t=p.createElement(a.a,{thumbnailUrl:e.imageUrl,tier:e.userTier||void 0});return{key:e.id,label:e.name,icon:t}}),i=e.find(e=>e.key===h.id);return p.createElement(p.Fragment,null,p.createElement(O,{emphasis:"low"},"Owner"),p.createElement(x,{items:e,selectedItem:i,disabled:n,onSelect:e=>{const n=t.find(t=>e.key===t.id);n&&b(n)}}))})()),!i&&p.createElement(l.a,{desktop:6,phone:12},(()=>{const e=c.map(e=>e.licenses).reduce((e,t)=>e.concat(t),[]).map(e=>({key:e.id,label:e.name})),t=e.find(e=>e.key===d);return p.createElement(p.Fragment,null,p.createElement(O,{emphasis:"low"},"License"),p.createElement(x,{items:e,selectedItem:t,disabled:n,onSelect:e=>f(e.key)}))})())))}},1381:function(e,t,n){"use strict";n.r(t);var i=n(6),s=n(0),a=n(742),r=n(4),o=n(93),l=n(139),c=n(912),d=n(1140),u=n(499),p=n(1104),g=n(1105),m=n(516),h=n(1498),f=n(743),b=n(671),C=n(1101),y=n(1102),v=n(481),E=n(1142),x=n(1143),O=n(1100),w=n(532),U=n(968),k=n(1019),j=n(44),S=n(1),T=n.n(S);const I=T.a.div`
  padding: ${e=>e.theme.size.pad.m};
`,P=T()(k.a)`
  width: 90%;
  height: 34px;
  margin-bottom: 8px;

  && .mdc-text-field__input {
    height: 32px !important;
  }

  && .mdc-floating-label {
    top: 8px;
  }

  && .mdc-floating-label--float-above {
    display: none !important;
  }

  && .mdc-notched-outline--notched .mdc-notched-outline__notch {
    display: none !important;
  }
`,_=T()(j.c)`
  display: flex;
`;function D(e){const t=s.useContext(v.a),{dataset:n,versionNotes:i,onVersionNotesChange:a}=e,{owner:r,slug:o}=n;return s.createElement(I,null,s.createElement(P,{invalid:i.hasError,disabled:t,value:i.text,label:"Enter version notes",onChange:e=>a(e.currentTarget.value)}),s.createElement(_,{emphasis:"disabled"},"www.kaggle.com/",r.slug,"/",o))}var R=n(1144),F=n(1103),N=n(1137),q=n(1135),B=n(1132),L=n(1136);function z(e){const t=s.useContext(v.a),{renderProp:n,selectedTab:i,dataset:a,config:r,settings:o,onFlagsChange:l}=e,{limits:d}=r,{license:p,isPrivate:g}=a,{flags:m}=o,{container:h,onUpdate:b}=n;if("uploadContainer"===i&&Object(u.r)(h))return s.createElement(B.a,{container:h,onUpdate:b,datasetId:a.datasetId});if("kernelOutputContainer"===i&&Object(u.i)(h))return s.createElement(q.a,{isDisabled:t,container:h,allowBackToSearch:!1,onUpdate:b});if("remoteUrlUploadContainer"===i&&Object(u.n)(h))return s.createElement(L.a,{isDisabled:t,container:h,onUpdate:b});if("githubContainer"===i&&Object(u.c)(h))return s.createElement(N.a,{container:h,onUpdate:b});if("gcsFileSetContainer"===i&&Object(u.b)(h))return s.createElement(F.a,{container:h,onUpdate:b});if("adminFlags"===i)return s.createElement(c.a,{flags:m,onFlagsChange:l});if("settings"===i){const{totalBytes:e,prevUsedBytes:t}=Object(U.f)(d,g),n=t+Object(f.a)(h),i={id:0,displaySequence:0,licenses:[{id:p.id,description:p.description,name:"",displaySequence:0,url:"#"}],name:""};return s.createElement(R.a,{isDisabled:!0,allowedOwners:[a.owner],licenseGroups:[i],limits:{totalBytes:e,usedBytes:n},isPrivate:a.isPrivate,licenseId:1,owner:a.owner,onLicenseIdChange:()=>{},onOwnerChange:()=>{},onPrivacyChange:()=>{}})}return s.createElement("div",null,"Invalid state")}function V(e){const{isOpen:t,creation:n,onCloseRequest:i}=e;return s.createElement(v.a.Provider,{value:n.isLoading},s.createElement(O.a,{open:t,onClose:i},$(e)))}const $=e=>{const{renderProp:t,defaultTabs:n,selectedTab:i,settings:a,config:r,dataset:o,creation:l,isConfirmingCloseRequest:c,onCreateSuccess:d,onVersionNotesChange:p,onTabSelect:g,onCloseRequest:m,onDisableConfirmClose:h,onFlagsChange:f}=e;if("error"===r)return s.createElement(C.a,null);if("loading"===r)return s.createElement(y.a,null);const{container:v,isContainerUploadable:O,isContainerDirty:U,doesContainerContainDuplicates:k,doesContainerHaveErrors:j,inflightUploadMessage:S}=t,{versionNotes:T}=a,{limits:I}=r,P=G(v,I,o.isPrivate),_=H(T,U),R=O&&!P&&!_&&!l.isLoading,F=_||(P||(j?u.a:l.errorMessage)),N=()=>F?{type:"error",str:F}:S,q=n.map(e=>Object.assign(Object.assign({},e),{isDisabled:M(l.isLoading,e.key,v)}));return c?s.createElement(b.a,{description:" If you close this dialog, all your work in this window will be lost.\n        Do you want to continue?",confirmText:"Confirm",cancelText:"Back",onAction:e=>{"confirm"===e?m():h()}}):s.createElement(s.Fragment,null,s.createElement(E.a,{tabs:q,selectedTab:i,onTabSelect:e=>g(e)}),s.createElement(w.d,null,s.createElement(w.e,null,s.createElement(D,{versionNotes:{text:T.value,hasError:!!_},dataset:o,onVersionNotesChange:p})),s.createElement(w.h,null,s.createElement(z,{dataset:o,renderProp:t,selectedTab:i,settings:a,config:r,onFlagsChange:f})),s.createElement(x.a,{isPrivate:o.isPrivate,statusMessage:N(),canCreate:R,isLoading:l.isLoading,privacyTip:o.isPrivate?"Update to public dataset in Settings tab":"This is a public Dataset",createText:k?"Skip duplicates":"Create",duplicateText:k?"Include duplicates":void 0,onCreate:e=>d(v,e)})))},M=(e,t,n)=>e||"settings"!==t&&"adminFlags"!==t&&n.type!==t,G=(e,t,n)=>{const i=Object(U.e)(t,n,e);if("success"!==i.status)return i.message},H=(e,t)=>{const{value:n}=e;if(t)return 0===n.trim().length?"Please enter version notes.":void 0};let Y=(()=>{class e extends s.Component{constructor(){super(...arguments),this.configUpdateId=0,this.state={selectedTab:this.props.defaultContainer.type,settings:{versionNotes:{value:"Data Update "+o.utc(new Date).format("YYYY/MM/DD")},flags:c.b},isConfirmingCloseRequest:!1,config:"loading",defaultContainer:this.props.defaultContainer,creation:{isLoading:!1}},this.loadConfig=()=>Object(r.__awaiter)(this,void 0,void 0,(function*(){const{dataset:e}=this.props,{lastDatasetVersionId:t,owner:n}=e,i={ownerOrganizationId:n.isOrganization?n.id:null,currentDatasetVersionId:t};try{this.configUpdateId++;const{datasetsClient:e}=this.context.clients,{defaultContainer:t}=this.state,n=yield e.getDatasetUploaderConfig(i),s=n.existingUploadDirectories&&n.existingUploadDirectories.length>0||n.existingUploadFiles&&n.existingUploadFiles.length>0,a=n.existingRemoteUrls&&n.existingRemoteUrls.length>0,r="uploadContainer"===t.type&&s?Object(h.b)(n.existingUploadDirectories,n.existingUploadFiles):"remoteUrlUploadContainer"===t.type&&a?Object(h.a)(n.existingRemoteUrls):t;this.configUpdateId++,this.setState({config:{limits:n.limits},defaultContainer:r})}catch(e){this.setState({config:"error"})}})),this.renderContents=e=>{const{isOpen:t,dataset:n,user:i}=this.props,{selectedTab:a,config:r,settings:o,creation:l,isConfirmingCloseRequest:c}=this.state;return s.createElement(V,{isOpen:t,isConfirmingCloseRequest:c,renderProp:e,defaultTabs:Object(p.b)(i),selectedTab:a,settings:o,config:r,creation:l,dataset:n,onTabSelect:this.onTabSelect(e),onCloseRequest:()=>this.onCloseRequest(e),onDisableConfirmClose:()=>this.setState({isConfirmingCloseRequest:!1}),onCreateSuccess:this.onCreate,onVersionNotesChange:this.onVersionNotesChange,onFlagsChange:this.onFlagsChange})},this.onCloseRequest=e=>{const{onCloseRequest:t}=this.props,{creation:n,isConfirmingCloseRequest:i}=this.state;n.isLoading||(i||e.isContainerClosable?t():this.setState({isConfirmingCloseRequest:!0}))},this.onTabSelect=e=>t=>{const{onUpdate:n,container:i}=e,{selectedTab:s}=this.state;this.setState({selectedTab:t}),("settings"!==s&&"adminFlags"!==s||i.type!==t)&&("githubContainer"!==t||Object(u.c)(i)?"remoteUrlUploadContainer"!==t||Object(u.n)(i)?"uploadContainer"!==t||Object(u.r)(i)||n("uploadContainer","reset",void 0):n("remoteUrlUploadContainer","reset",void 0):n("githubContainer","reset",void 0))},this.onVersionNotesChange=e=>{this.setState(t=>({settings:Object.assign(Object.assign({},t.settings),{versionNotes:{value:e}})}))},this.onFlagsChange=e=>{const{settings:t}=this.state;this.setState({settings:Object.assign(Object.assign({},t),{flags:e})})},this.onCreate=(e,t)=>Object(r.__awaiter)(this,void 0,void 0,(function*(){const n="create"===t?A(e):e;"create"!==t||"uploadContainer"!==n.type||0!==Object(m.b)(n,()=>!0)?this.setState({creation:{isLoading:!0}},()=>this.onCreateRequest(n,t)):this.onCreationError("Please specify at least one non-duplicate file.")})),this.onCreateRequest=Object(l.a)(1e3,!0,(e,t)=>Object(r.__awaiter)(this,void 0,void 0,(function*(){const{dataset:n,user:i}=this.props,{settings:s}=this.state,{versionNotes:r,flags:o}=s,{datasetId:l}=n,c=Object(g.c)(e,{datasetId:l,versionNotes:r.value,flags:i.isAdmin?o:null}),{analyticsClient:d}=this.context.legacyClients,u="uploadContainer"===e.type&&(e.directories.length>0||e.existingDirectories.length>0);Object(a.a)(d,"version",t,u,"",!1,c);try{const{datasetsClient:t}=this.context.clients,n=yield t.createDatasetVersionRequestV2(c);if("ok"===n.status){const{onCreateSuccess:t}=this.props;t(W(n,e))}else this.onCreationError(n.errorMessage?n.errorMessage:"An internal error occurred.")}catch(e){if("string"==typeof e.message)this.onCreationError(e.message);else{if("string"!=typeof e)throw e;this.onCreationError(e)}}}))),this.onCreationError=e=>{this.setState({creation:{errorMessage:e,isLoading:!1}})}}componentDidMount(){const{isOpen:e}=this.props;e&&this.loadConfig()}render(){const{defaultContainer:e}=this.state;return s.createElement(d.a,{defaultContainer:e,key:this.configUpdateId},this.renderContents)}}return e.contextType=i.b,e})();const W=(e,t)=>{var n;if("ok"===e.status){const{url:i,datasetVersionReference:s,databundleVersionReference:a}=e,{databundleVersionId:r}=a,{datasetVersionId:o}=s;return{id:(null===(n=e.datasetVersionReference)||void 0===n?void 0:n.datasetId)||0,url:i,databundleSize:Object(f.a)(t),databundleVersionId:r,versionId:o}}throw new Error("Failed to create dataset")},A=e=>{if(Object(u.r)(e)){const{files:t,directories:n}=e;return Object.assign(Object.assign({},e),{files:t.filter(e=>"duplicate"!==e.state.type),directories:n.map(e=>J(e))})}return e},J=e=>{const{files:t,directories:n}=e;return Object.assign(Object.assign({},e),{files:t.filter(e=>"duplicate"!==e.state.type),directories:n.map(e=>J(e))})};var Q=n(1134);n.d(t,"VersionFlow",(function(){return K}));let K=(()=>{class e extends s.Component{componentDidUpdate(e){const{isOpen:t}=this.props,{analyticsClient:n}=this.context.legacyClients;e.isOpen!==t&&Object(a.c)(n,"version",t)}render(){const{isOpen:e,onCloseRequest:t,stubProcessingState:n}=this.props;return s.createElement(Q.a,{isOpen:e,successScreen:{buttonText:"Close",descriptionText:"Your new version was uploaded. Click the button below to close this dialog."},failureScreen:{buttonText:"Close",descriptionText:"Unfortunately we could not create your new dataset version."},processingScreen:{buttonText:"Close",descriptionText:"If your dataset is public, users will see the previous version during processing."},resetOnClose:!0,renderUploader:X(this.props),onCloseRequest:t,stubProcessingState:n})}}return e.contextType=i.b,e})();const X=e=>t=>{const{isOpen:n,user:i,referrer:a,defaultContainer:r,dataset:o}=e,{onCloseRequest:l,onCreateSuccess:c}=t;return s.createElement(Y,{key:n?"open":"closed",isOpen:n,user:i,referrer:a,onCloseRequest:l,onCreateSuccess:c,dataset:o,defaultContainer:r})}},1498:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));const i=(e,t)=>({type:"uploadContainer",files:[],directories:[],existingFiles:t.map(e=>a(e)),existingDirectories:e.map(e=>r(e))}),s=e=>({type:"remoteUrlUploadContainer",children:e.map(e=>({type:"remoteUrlUploadFile",name:e.name,url:e.url,state:{type:"success",size:0}}))}),a=e=>({type:"existingFile",name:e.name,size:e.size,identifier:{type:"firestore",gcsPath:e.gcsPath||""}}),r=e=>({type:"existingDirectory",name:e.name,directories:e.directories.map(e=>r(e)),files:e.files.map(e=>a(e))})},577:function(e,t,n){},578:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n(0),s=n(15),a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n},o=Object(s.a)({displayName:"GridRoot",classNames:function(e){var t;return["mdc-layout-grid",(t={},t["mdc-layout-grid__cell--align-"+(e.align||"")]=void 0!==e.align,t["mdc-layout-grid--fixed-column-width"]=e.fixedColumnWidth,t)]},consumeProps:["fixedColumnWidth","align"]}),l=function(e){var t=e.children,n=r(e,["children"]),s=!(t&&"object"==typeof t&&"GridInner"===(t.type||{}).displayName);return i.createElement(o,a({},n),s?i.createElement(d,null,t):t)};l.displayName="Grid";var c=Object(s.a)({displayName:"GridCell",classNames:function(e){var t;return["mdc-layout-grid__cell",(t={},t["mdc-layout-grid__cell--order-"+(e.order||"")]=void 0!==e.order,t["mdc-layout-grid__cell--align-"+(e.align||"")]=void 0!==e.align,t["mdc-layout-grid__cell--span-"+(e.span||"")]=void 0!==e.span,t["mdc-layout-grid__cell--span-"+(e.phone||"")+"-phone"]=void 0!==e.phone,t["mdc-layout-grid__cell--span-"+(e.tablet||"")+"-tablet"]=void 0!==e.tablet,t["mdc-layout-grid__cell--span-"+(e.desktop||"")+"-desktop"]=void 0!==e.desktop,t)]},consumeProps:["span","phone","tablet","desktop","order","align"]}),d=Object(s.a)({displayName:"GridInner",classNames:["mdc-layout-grid__inner"]})},968:function(e,t,n){"use strict";var i=n(482),s=n(743),a=n(516);n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u}));const r=5,o=50,l=6,c=50,d=(e,t,n)=>{if((e=>{if("uploadContainer"===e.type){return Object(a.b)(e,()=>!0)}return"remoteUrlUploadContainer"===e.type?e.children.length:0})(n)>e.maxFiles){return{status:"error",message:`Maximum number of files exceeded (${e.maxFiles})`}}const r=u(e,t),o=r.totalBytes-r.prevUsedBytes,l=Object(s.a)(n);if(l>o){return{status:"error",message:`The total size of the dataset (${i(l)}) must be below ${i(o)}`}}return{status:"success"}},u=(e,t)=>{if(t){const{totalBytes:t,usedBytes:n}=e.privateLimits;return{totalBytes:t,prevUsedBytes:n}}const{maxBytes:n}=e.publicLimits;return{totalBytes:n,prevUsedBytes:0}}}}]);
//# sourceMappingURL=99.67d4bdff713ee2faa27a.js.map